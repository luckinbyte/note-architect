<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>云服务器购买及安装配置(JDK/Tomcat/MariaDB) | JAVA 架构师笔记</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/note-architect/favicon.ico">
    <link rel="manifest" href="/note-architect/manifest.json">
    <meta name="description" content="用来记录架构师相关成套的知识">
    
    <link rel="preload" href="/note-architect/assets/css/0.styles.40de79f3.css" as="style"><link rel="preload" href="/note-architect/assets/js/app.802a2e28.js" as="script"><link rel="preload" href="/note-architect/assets/js/2.c5658f11.js" as="script"><link rel="preload" href="/note-architect/assets/js/10.038bd2f4.js" as="script"><link rel="preload" href="/note-architect/assets/js/49.c0fbdc86.js" as="script"><link rel="prefetch" href="/note-architect/assets/js/100.fc44c5c8.js"><link rel="prefetch" href="/note-architect/assets/js/101.d6ddaa00.js"><link rel="prefetch" href="/note-architect/assets/js/102.c2404ad0.js"><link rel="prefetch" href="/note-architect/assets/js/103.8c0b467f.js"><link rel="prefetch" href="/note-architect/assets/js/104.a868e36f.js"><link rel="prefetch" href="/note-architect/assets/js/105.3cb3e1f1.js"><link rel="prefetch" href="/note-architect/assets/js/106.9b2b7410.js"><link rel="prefetch" href="/note-architect/assets/js/107.bf95d31c.js"><link rel="prefetch" href="/note-architect/assets/js/108.105ebbf6.js"><link rel="prefetch" href="/note-architect/assets/js/109.6a712361.js"><link rel="prefetch" href="/note-architect/assets/js/11.29b6711f.js"><link rel="prefetch" href="/note-architect/assets/js/110.a1b792d6.js"><link rel="prefetch" href="/note-architect/assets/js/111.28f776f9.js"><link rel="prefetch" href="/note-architect/assets/js/112.2f670e54.js"><link rel="prefetch" href="/note-architect/assets/js/113.4edaed31.js"><link rel="prefetch" href="/note-architect/assets/js/114.e41a52b2.js"><link rel="prefetch" href="/note-architect/assets/js/115.61de6b4a.js"><link rel="prefetch" href="/note-architect/assets/js/116.92db9f4a.js"><link rel="prefetch" href="/note-architect/assets/js/117.7d8aa021.js"><link rel="prefetch" href="/note-architect/assets/js/118.3edc1e2c.js"><link rel="prefetch" href="/note-architect/assets/js/119.d9d900c0.js"><link rel="prefetch" href="/note-architect/assets/js/12.af831555.js"><link rel="prefetch" href="/note-architect/assets/js/120.38d947f2.js"><link rel="prefetch" href="/note-architect/assets/js/121.68a835c1.js"><link rel="prefetch" href="/note-architect/assets/js/122.8d1af96b.js"><link rel="prefetch" href="/note-architect/assets/js/123.478593b1.js"><link rel="prefetch" href="/note-architect/assets/js/124.449b42a5.js"><link rel="prefetch" href="/note-architect/assets/js/125.52be7b0c.js"><link rel="prefetch" href="/note-architect/assets/js/126.70dbe62e.js"><link rel="prefetch" href="/note-architect/assets/js/127.d95ea977.js"><link rel="prefetch" href="/note-architect/assets/js/128.8f0c0f9b.js"><link rel="prefetch" href="/note-architect/assets/js/129.4124e2f0.js"><link rel="prefetch" href="/note-architect/assets/js/13.dc9b0de9.js"><link rel="prefetch" href="/note-architect/assets/js/130.0a168309.js"><link rel="prefetch" href="/note-architect/assets/js/131.c5ead1a0.js"><link rel="prefetch" href="/note-architect/assets/js/132.d2ea7534.js"><link rel="prefetch" href="/note-architect/assets/js/133.99d3b899.js"><link rel="prefetch" href="/note-architect/assets/js/134.585e0c4b.js"><link rel="prefetch" href="/note-architect/assets/js/135.2939b773.js"><link rel="prefetch" href="/note-architect/assets/js/136.40e330a3.js"><link rel="prefetch" href="/note-architect/assets/js/137.cc77c2a2.js"><link rel="prefetch" href="/note-architect/assets/js/138.dcccdebc.js"><link rel="prefetch" href="/note-architect/assets/js/139.fa88b1d0.js"><link rel="prefetch" href="/note-architect/assets/js/14.bf3fade4.js"><link rel="prefetch" href="/note-architect/assets/js/140.899e432e.js"><link rel="prefetch" href="/note-architect/assets/js/141.b604c177.js"><link rel="prefetch" href="/note-architect/assets/js/142.b2623ea4.js"><link rel="prefetch" href="/note-architect/assets/js/143.bba5b5c1.js"><link rel="prefetch" href="/note-architect/assets/js/144.1f522ea7.js"><link rel="prefetch" href="/note-architect/assets/js/145.c4fe8713.js"><link rel="prefetch" href="/note-architect/assets/js/146.dccb50ff.js"><link rel="prefetch" href="/note-architect/assets/js/147.50c25c20.js"><link rel="prefetch" href="/note-architect/assets/js/148.b902dfb5.js"><link rel="prefetch" href="/note-architect/assets/js/149.470b96c8.js"><link rel="prefetch" href="/note-architect/assets/js/15.a8e38bb8.js"><link rel="prefetch" href="/note-architect/assets/js/150.fa139f6f.js"><link rel="prefetch" href="/note-architect/assets/js/151.4983ec0a.js"><link rel="prefetch" href="/note-architect/assets/js/152.f1a81e90.js"><link rel="prefetch" href="/note-architect/assets/js/153.3321ef67.js"><link rel="prefetch" href="/note-architect/assets/js/154.b84ed6b9.js"><link rel="prefetch" href="/note-architect/assets/js/155.171fb3b5.js"><link rel="prefetch" href="/note-architect/assets/js/156.5ca76a29.js"><link rel="prefetch" href="/note-architect/assets/js/157.0111e24a.js"><link rel="prefetch" href="/note-architect/assets/js/158.d9895956.js"><link rel="prefetch" href="/note-architect/assets/js/159.907d1b38.js"><link rel="prefetch" href="/note-architect/assets/js/16.39fa402f.js"><link rel="prefetch" href="/note-architect/assets/js/160.2ea29a4f.js"><link rel="prefetch" href="/note-architect/assets/js/161.e51df7aa.js"><link rel="prefetch" href="/note-architect/assets/js/162.06b72fae.js"><link rel="prefetch" href="/note-architect/assets/js/163.fc5cdf96.js"><link rel="prefetch" href="/note-architect/assets/js/164.3d0ea04b.js"><link rel="prefetch" href="/note-architect/assets/js/165.fad9b58f.js"><link rel="prefetch" href="/note-architect/assets/js/166.6cefe279.js"><link rel="prefetch" href="/note-architect/assets/js/17.bf07d804.js"><link rel="prefetch" href="/note-architect/assets/js/18.07dc5bdc.js"><link rel="prefetch" href="/note-architect/assets/js/19.a85dec67.js"><link rel="prefetch" href="/note-architect/assets/js/20.9df8f68a.js"><link rel="prefetch" href="/note-architect/assets/js/21.78f29c8e.js"><link rel="prefetch" href="/note-architect/assets/js/22.79434bbc.js"><link rel="prefetch" href="/note-architect/assets/js/23.5c161369.js"><link rel="prefetch" href="/note-architect/assets/js/24.fb99210d.js"><link rel="prefetch" href="/note-architect/assets/js/25.121dc1ac.js"><link rel="prefetch" href="/note-architect/assets/js/26.d9a1e563.js"><link rel="prefetch" href="/note-architect/assets/js/27.aa7847c4.js"><link rel="prefetch" href="/note-architect/assets/js/28.d9165cf0.js"><link rel="prefetch" href="/note-architect/assets/js/29.c375185e.js"><link rel="prefetch" href="/note-architect/assets/js/3.82a12f44.js"><link rel="prefetch" href="/note-architect/assets/js/30.7077de2f.js"><link rel="prefetch" href="/note-architect/assets/js/31.c0a05c83.js"><link rel="prefetch" href="/note-architect/assets/js/32.35c6ff4d.js"><link rel="prefetch" href="/note-architect/assets/js/33.5094c396.js"><link rel="prefetch" href="/note-architect/assets/js/34.f3fc3771.js"><link rel="prefetch" href="/note-architect/assets/js/35.8c8f3676.js"><link rel="prefetch" href="/note-architect/assets/js/36.695633ac.js"><link rel="prefetch" href="/note-architect/assets/js/37.d6240666.js"><link rel="prefetch" href="/note-architect/assets/js/38.1df53f36.js"><link rel="prefetch" href="/note-architect/assets/js/39.92c722fe.js"><link rel="prefetch" href="/note-architect/assets/js/4.22e0c41e.js"><link rel="prefetch" href="/note-architect/assets/js/40.59a891fb.js"><link rel="prefetch" href="/note-architect/assets/js/41.db5bd8a6.js"><link rel="prefetch" href="/note-architect/assets/js/42.aa467f7a.js"><link rel="prefetch" href="/note-architect/assets/js/43.c1c328a0.js"><link rel="prefetch" href="/note-architect/assets/js/44.5f99d5c0.js"><link rel="prefetch" href="/note-architect/assets/js/45.43ef5aaf.js"><link rel="prefetch" href="/note-architect/assets/js/46.985a6532.js"><link rel="prefetch" href="/note-architect/assets/js/47.b03937ac.js"><link rel="prefetch" href="/note-architect/assets/js/48.a829dba9.js"><link rel="prefetch" href="/note-architect/assets/js/5.335b38b2.js"><link rel="prefetch" href="/note-architect/assets/js/50.55a20ce0.js"><link rel="prefetch" href="/note-architect/assets/js/51.0b9d082d.js"><link rel="prefetch" href="/note-architect/assets/js/52.31e36b5e.js"><link rel="prefetch" href="/note-architect/assets/js/53.cf02d0bf.js"><link rel="prefetch" href="/note-architect/assets/js/54.46f98077.js"><link rel="prefetch" href="/note-architect/assets/js/55.bae22541.js"><link rel="prefetch" href="/note-architect/assets/js/56.675a88ec.js"><link rel="prefetch" href="/note-architect/assets/js/57.73c054a7.js"><link rel="prefetch" href="/note-architect/assets/js/58.066cdd65.js"><link rel="prefetch" href="/note-architect/assets/js/59.f624c81a.js"><link rel="prefetch" href="/note-architect/assets/js/6.1815f9e0.js"><link rel="prefetch" href="/note-architect/assets/js/60.4ec97ade.js"><link rel="prefetch" href="/note-architect/assets/js/61.2d30af4e.js"><link rel="prefetch" href="/note-architect/assets/js/62.a6f0c63c.js"><link rel="prefetch" href="/note-architect/assets/js/63.aab63fa8.js"><link rel="prefetch" href="/note-architect/assets/js/64.2d7e132f.js"><link rel="prefetch" href="/note-architect/assets/js/65.8e8c1a4f.js"><link rel="prefetch" href="/note-architect/assets/js/66.a151a66d.js"><link rel="prefetch" href="/note-architect/assets/js/67.68bdef69.js"><link rel="prefetch" href="/note-architect/assets/js/68.94567caa.js"><link rel="prefetch" href="/note-architect/assets/js/69.ba8d09fe.js"><link rel="prefetch" href="/note-architect/assets/js/7.34eb2a5e.js"><link rel="prefetch" href="/note-architect/assets/js/70.d7f353a7.js"><link rel="prefetch" href="/note-architect/assets/js/71.8565b766.js"><link rel="prefetch" href="/note-architect/assets/js/72.6de13f5f.js"><link rel="prefetch" href="/note-architect/assets/js/73.fef0b259.js"><link rel="prefetch" href="/note-architect/assets/js/74.447be4ac.js"><link rel="prefetch" href="/note-architect/assets/js/75.ad821c96.js"><link rel="prefetch" href="/note-architect/assets/js/76.f142121f.js"><link rel="prefetch" href="/note-architect/assets/js/77.5b09b27c.js"><link rel="prefetch" href="/note-architect/assets/js/78.831355de.js"><link rel="prefetch" href="/note-architect/assets/js/79.0c33d6bd.js"><link rel="prefetch" href="/note-architect/assets/js/8.5216941d.js"><link rel="prefetch" href="/note-architect/assets/js/80.38372191.js"><link rel="prefetch" href="/note-architect/assets/js/81.6ff68f48.js"><link rel="prefetch" href="/note-architect/assets/js/82.d6b0d436.js"><link rel="prefetch" href="/note-architect/assets/js/83.33a665f1.js"><link rel="prefetch" href="/note-architect/assets/js/84.8cf13177.js"><link rel="prefetch" href="/note-architect/assets/js/85.7f57a85f.js"><link rel="prefetch" href="/note-architect/assets/js/86.a4e08824.js"><link rel="prefetch" href="/note-architect/assets/js/87.30e592e4.js"><link rel="prefetch" href="/note-architect/assets/js/88.29d90381.js"><link rel="prefetch" href="/note-architect/assets/js/89.670570cf.js"><link rel="prefetch" href="/note-architect/assets/js/9.84f1b2c0.js"><link rel="prefetch" href="/note-architect/assets/js/90.6667fd66.js"><link rel="prefetch" href="/note-architect/assets/js/91.6a90cf9b.js"><link rel="prefetch" href="/note-architect/assets/js/92.1ac7174d.js"><link rel="prefetch" href="/note-architect/assets/js/93.162baa9d.js"><link rel="prefetch" href="/note-architect/assets/js/94.961c55b0.js"><link rel="prefetch" href="/note-architect/assets/js/95.3b84241e.js"><link rel="prefetch" href="/note-architect/assets/js/96.f7f0df08.js"><link rel="prefetch" href="/note-architect/assets/js/97.01e2417b.js"><link rel="prefetch" href="/note-architect/assets/js/98.a4a96a8d.js"><link rel="prefetch" href="/note-architect/assets/js/99.7300aff8.js">
    <link rel="stylesheet" href="/note-architect/assets/css/0.styles.40de79f3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/note-architect/" class="home-link router-link-active"><img src="/note-architect/mlogo.svg" alt="JAVA 架构师笔记" class="logo"> <span class="site-name can-hide">JAVA 架构师笔记</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/note-architect/hc/" class="nav-link">
  高并发系统设计 40 问
</a></div><div class="nav-item"><a href="/note-architect/ztc/" class="nav-link router-link-active">
  JAVA 架构师直通车
</a></div> <a href="https://github.com/zq99299/note-architect" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/note-architect/hc/" class="nav-link">
  高并发系统设计 40 问
</a></div><div class="nav-item"><a href="/note-architect/ztc/" class="nav-link router-link-active">
  JAVA 架构师直通车
</a></div> <a href="https://github.com/zq99299/note-architect" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/note-architect/ztc/" aria-current="page" class="sidebar-link">JAVA 架构师直通车</a></li><li><section class="sidebar-group collapsable depth-0"><a href="/note-architect/ztc/00/" class="sidebar-heading clickable"><span>开篇</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/note-architect/ztc/01/" class="sidebar-heading clickable"><span>01 | 万丈高楼，地基首要</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/note-architect/ztc/02/" class="sidebar-heading clickable"><span>02 | 分类、推荐、搜索、评价、购物车开发</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/note-architect/ztc/03/" class="sidebar-heading clickable"><span>03 | 地址、订单、支付、定时任务开发</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/note-architect/ztc/04/" class="sidebar-heading clickable"><span>04 | 用户中心 、订单、评价管理开发</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/note-architect/ztc/05/" class="sidebar-heading clickable router-link-active open"><span>05 | 云服务器部署上线</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/note-architect/ztc/05/01.html" aria-current="page" class="active sidebar-link">云服务器购买及安装配置(JDK/Tomcat/MariaDB)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note-architect/ztc/05/01.html#前置必备" class="sidebar-link">前置必备</a></li><li class="sidebar-sub-header"><a href="/note-architect/ztc/05/01.html#云服务器购买建议" class="sidebar-link">云服务器购买建议</a></li><li class="sidebar-sub-header"><a href="/note-architect/ztc/05/01.html#安装-jdk" class="sidebar-link">安装 JDK</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note-architect/ztc/05/01.html#检查是否安装-jdk" class="sidebar-link">检查是否安装 JDK</a></li><li class="sidebar-sub-header"><a href="/note-architect/ztc/05/01.html#卸载" class="sidebar-link">卸载</a></li><li class="sidebar-sub-header"><a href="/note-architect/ztc/05/01.html#安装" class="sidebar-link">安装</a></li></ul></li><li class="sidebar-sub-header"><a href="/note-architect/ztc/05/01.html#安装-tomcat" class="sidebar-link">安装 Tomcat</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note-architect/ztc/05/01.html#部署方案" class="sidebar-link">部署方案</a></li><li class="sidebar-sub-header"><a href="/note-architect/ztc/05/01.html#部署前端-tomcat" class="sidebar-link">部署前端 tomcat</a></li><li class="sidebar-sub-header"><a href="/note-architect/ztc/05/01.html#部署后端-tomcat" class="sidebar-link">部署后端 tomcat</a></li></ul></li><li class="sidebar-sub-header"><a href="/note-architect/ztc/05/01.html#centos7-防火墙-端口管理" class="sidebar-link">centos7 防火墙/端口管理</a></li><li class="sidebar-sub-header"><a href="/note-architect/ztc/05/01.html#安装-mariadb" class="sidebar-link">安装 MariaDB</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note-architect/ztc/05/01.html#安装-2" class="sidebar-link">安装</a></li><li class="sidebar-sub-header"><a href="/note-architect/ztc/05/01.html#mariadb-启动与抽次安全配置" class="sidebar-link">mariaDb 启动与抽次安全配置</a></li><li class="sidebar-sub-header"><a href="/note-architect/ztc/05/01.html#配置远程登录" class="sidebar-link">配置远程登录</a></li></ul></li><li class="sidebar-sub-header"><a href="/note-architect/ztc/05/01.html#准备生产环境所需要的表结构" class="sidebar-link">准备生产环境所需要的表结构</a></li></ul></li><li><a href="/note-architect/ztc/05/02.html" class="sidebar-link">SpringBoot 多环境部署 profile(开发环境/生产环境)</a></li><li><a href="/note-architect/ztc/05/03.html" class="sidebar-link">SpringBoot 项目打成 war 并发布到云服务器</a></li><li><a href="/note-architect/ztc/05/04.html" class="sidebar-link">前端项目发布</a></li><li><a href="/note-architect/ztc/05/05.html" class="sidebar-link">解决 Cookie 异常，测试订单支付流程</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/note-architect/ztc/06/" class="sidebar-heading clickable"><span>06 | LVS + Nginx 实现高可用集群</span> <span class="arrow right"></span></a> <!----></section></li><li><a href="/note-architect/ztc/07/" class="sidebar-link">07 | 主从复制高可用 Redis 集群</a></li><li><a href="/note-architect/ztc/08/" class="sidebar-link">08 | Redis 缓存雪崩、穿透</a></li><li><a href="/note-architect/ztc/09/" class="sidebar-link">09 | 分布式会话与单点登录 SSO</a></li><li><a href="/note-architect/ztc/10/" class="sidebar-link">10 | 分布式搜索引擎 Elasticsearch</a></li><li><a href="/note-architect/ztc/11/" class="sidebar-link">11 | 分布式文件系统 FastDFS、阿里 OSS</a></li><li><a href="/note-architect/ztc/12/" class="sidebar-link">12 | 分布式消息队列 RabbitMQ</a></li><li><a href="/note-architect/ztc/13/" class="sidebar-link">13 | 分布式消息队列 Kafka</a></li><li><a href="/note-architect/ztc/14/" class="sidebar-link">14 | 分布式锁</a></li><li><a href="/note-architect/ztc/15/" class="sidebar-link">15 | 读写分离、分库分表 MyCAT 和 Sharding JDBC</a></li><li><a href="/note-architect/ztc/16/" class="sidebar-link">16 | 分布式全局 ID、分布式事务和数据一致性</a></li><li><a href="/note-architect/ztc/17/" class="sidebar-link">17 | 分布式接口幂等性、分布式限流</a></li><li><a href="/note-architect/ztc/18/" class="sidebar-link">18 | 微服务架构认知、服务治理 Eureka</a></li><li><a href="/note-architect/ztc/19/" class="sidebar-link">19 | 负载均衡 Ribbon、服务通信与调用 Feign</a></li><li><a href="/note-architect/ztc/20/" class="sidebar-link">20 | 服务容错 Hystrix</a></li><li><a href="/note-architect/ztc/21/" class="sidebar-link">21 | 分布式配置中心 Config</a></li><li><a href="/note-architect/ztc/22/" class="sidebar-link">22 | 消息总线 Bus、服务网关 Gateway</a></li><li><a href="/note-architect/ztc/23/" class="sidebar-link">23 | 服务调用链追踪 Sleuth、消息驱动 Stream</a></li><li><a href="/note-architect/ztc/24/" class="sidebar-link">24 | 微服务下 Sentinel 流量防控卫兵</a></li><li><a href="/note-architect/ztc/25/" class="sidebar-link">25 | 服务治理的另一条路  Dubbo</a></li><li><a href="/note-architect/ztc/26/" class="sidebar-link">26 | 服务容器化 Docker</a></li><li><a href="/note-architect/ztc/27/" class="sidebar-link">27 | 容器技术 Cloud Foundry</a></li><li><a href="/note-architect/ztc/28/" class="sidebar-link">28 | 容器编排 Mesos + Marathon</a></li><li><a href="/note-architect/ztc/29/" class="sidebar-link">29 | 容器编排 K8S</a></li><li><a href="/note-architect/ztc/30/" class="sidebar-link">30 | 容器弹性扩缩容架构思路</a></li><li><a href="/note-architect/ztc/31/" class="sidebar-link">31 | 高性能网络通信基石 Netty 入门与提高</a></li><li><a href="/note-architect/ztc/32/" class="sidebar-link">32 | 高性能网络通信基石 Netty 最佳实战</a></li><li><a href="/note-architect/ztc/33/" class="sidebar-link">33 | 基于 Netty 打造 RPC 通信框架 1</a></li><li><a href="/note-architect/ztc/34/" class="sidebar-link">34 | 基于 Netty 打造 RPC 通信框架 2</a></li><li><a href="/note-architect/ztc/35/" class="sidebar-link">35 | 应用监控与调优 - 工具篇</a></li><li><a href="/note-architect/ztc/36/" class="sidebar-link">36 | 应用监控与调优 - 技巧与实战篇</a></li><li><a href="/note-architect/ztc/37/" class="sidebar-link">37 | JVM 性能调优 - 理论 + 工具篇</a></li><li><a href="/note-architect/ztc/38/" class="sidebar-link">38 | JVM 性能调优 - 实战篇</a></li><li><a href="/note-architect/ztc/39/" class="sidebar-link">39 | 数据库监控与调优</a></li><li><a href="/note-architect/ztc/40/" class="sidebar-link">40 | Linux 调优与架构调优</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="云服务器购买及安装配置-jdk-tomcat-mariadb"><a href="#云服务器购买及安装配置-jdk-tomcat-mariadb" class="header-anchor">#</a> 云服务器购买及安装配置(JDK/Tomcat/MariaDB)</h1> <h2 id="前置必备"><a href="#前置必备" class="header-anchor">#</a> 前置必备</h2> <ul><li><p>云服务器 或 本地虚拟机</p> <p>部署项目，如果有云服务器则用云服务器，没有则可以使用本地虚拟机来部署，充当线上环境</p></li> <li><p>Linux 系统基础</p> <p>你需要懂一些 Linux 的基础知识</p></li> <li><p>内网互通</p> <p>因为需要安装多台虚拟机，所以需要这些虚拟机内网互通</p></li></ul> <h2 id="云服务器购买建议"><a href="#云服务器购买建议" class="header-anchor">#</a> 云服务器购买建议</h2> <p>这里以 <a href="buy.cloud.tencent.com">腾讯云服务器</a> 举例说明</p> <p><img src="/note-architect/assets/img/yunpc.a93fee32.png" alt="yunpc"></p> <p>需要注意的有如下项（这些每个云服务器厂商购买页面都有说明），特别注意的是一些通用概念：</p> <ul><li><p>地域</p> <p>腾讯云云服务器托管机房分布在全球多个位置，由不同的地域（region）构成。每个地域（region）都指一个独立的物理数据中心，不同地域间的云服务器内网不互通。</p> <p>服务器购买后，不能更换区域，除非重新购买服务器</p></li> <li><p>可用区</p> <p>每个地域内都有多个物理上相互隔离的位置，称为可用区（zone）。每个可用区都是独立的，同一地域下的可用区通过低时延的内网链路相连。同一地域下的不同可用区间的云服务器可以通过内网互相访问</p></li> <li><p>网络</p> <p>默认为私有网络/子网，购买服务器后，可以去新建私有网络或子网</p></li> <li><p>实例</p> <p>重要的就是选择 CPU 核数，一般 16 核、32G 服务器就很不错了，根据需要选择</p> <p>它的 CPU 高低还和内网带宽绑定，这个挑选时需要注意</p></li> <li><p>镜像</p> <p>也就是选择服务器系统，一般选择  CentOS 64 位 7.x 以上了</p></li> <li><p>系统盘</p> <p>可选 SSD 和高性能普通盘，需要注意的是，系统盘选定后不能更换介质，大小也无法变更，只能通过挂载其他盘的方式来扩充</p></li> <li><p>公网带宽</p> <p>可选免费分配独立公网 IP</p> <p>云服务器需要外网访问能力的时候，需要为云服务器分配公网 IP，如果云服务器不分配公网 IP，不支持外出流量，并且无法使用外网 IP 对外进行互相通信。</p></li> <li><p>公共网关</p> <p>视频中选购的时候有该选项，笔者购买的时候没有看到</p> <p><img src="/note-architect/assets/img/image-20210225214202858.730f993a.png" alt="image-20210225214202858"></p> <p>它的作用是这样的，说如果不绑定公共网关，该服务器是不能访问外网的，比如用户服务器调用第三方 API 接口，无法调用，只有通过 nginx 主/备这两台作为公共网关的机器去访问。</p> <p>笔者对网络这一块不太熟悉，所以没有太明白其中的含义。</p></li></ul> <p><img src="/note-architect/assets/img/yunpc2.cd713e2d.png" alt="yunpc2"></p> <ul><li><p>安全组</p> <p>可以配置入站规则和出站规则</p> <p>入站：允许哪些来源的 IP 和端口访问我们的服务器</p> <p>出站：允许我们的服务器可以访问哪些网络上的 IP 和 端口，只有这里允许了的，才可以访问出去，否则将不能访问到外网环境</p></li> <li><p>其他的，就没有那么重要了</p></li></ul> <h2 id="安装-jdk"><a href="#安装-jdk" class="header-anchor">#</a> 安装 JDK</h2> <p>购买云服务器后，厂商会提供一个公网 IP 和内网 IP，我们需要使用 SSH 工具连接到云服务器，随后就能在命令行中操作 linux 系统。</p> <ul><li><p>公网 IP：39.106.215.59</p></li> <li><p>内网 IP：172.17.41.6</p></li></ul> <p>若在本地虚拟机中操作 linux，只需要配置静态 IP 即可，比如：192.168.1.88</p> <p>推荐使用 SecureCRT 工具来链接 SSH，它在 windows 和 mac 上都可以使用</p> <h3 id="检查是否安装-jdk"><a href="#检查是否安装-jdk" class="header-anchor">#</a> 检查是否安装 JDK</h3> <p>服务器安装 JDK 之前，先确保有没有默认安装 JDK，执行以下命令进行检查：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>java <span class="token operator">-</span>version
openjdk version <span class="token string">&quot;1.8.0_222-ea&quot;</span>
<span class="token class-name">OpenJDK</span> <span class="token class-name">Runtime</span> <span class="token class-name">Environment</span> <span class="token punctuation">(</span>build <span class="token number">1.8</span><span class="token number">.0_222</span><span class="token operator">-</span>ea<span class="token operator">-</span>b03<span class="token punctuation">)</span>
<span class="token class-name">OpenJDK</span> <span class="token number">64</span><span class="token operator">-</span><span class="token class-name">Bit</span> <span class="token class-name">Server</span> VM <span class="token punctuation">(</span>build <span class="token number">25.222</span><span class="token operator">-</span>b03<span class="token punctuation">,</span> mixed mode<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>如果需要卸载，卸载步骤如下：</p> <h3 id="卸载"><a href="#卸载" class="header-anchor">#</a> 卸载</h3> <p>检查系统安装的 OpenJDK</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">rpm</span> -qa <span class="token operator">|</span> <span class="token function">grep</span> openJdk -i
java-1.8.0-openjdk-headless-1.8.0.222.b03-1.el7.x86_64
java-1.8.0-openjdk-1.8.0.222.b03-1.el7.x86_64
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>删除以上 2 项的安装包并且，再次检查是否删除完成</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 删除</span>
<span class="token function">rpm</span> -e --nodeps java-1.8.0-openjdk-headless-1.8.0.222.b03-1.el7.x86_64
<span class="token function">rpm</span> -e --nodeps java-1.8.0-openjdk-1.8.0.222.b03-1.el7.x86_64

<span class="token comment"># 再次查看</span>
<span class="token function">rpm</span> -qa <span class="token operator">|</span> <span class="token function">grep</span> openJdk -i
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="安装"><a href="#安装" class="header-anchor">#</a> 安装</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 创建目录，该目录用来存放 jdk</span>
<span class="token function">mkdir</span> /usr/java
<span class="token comment"># 创建专门用来存放软件的临时目录</span>
<span class="token function">mkdir</span> /home/software
<span class="token comment"># 通过 ftp 工具将我们本地下载好的 jdk tar.gz 的包上传到该目录下</span>
<span class="token comment"># 解压 jdk 压缩包</span>
<span class="token function">tar</span> -zxvf jdk-8u9191-linux-x64.tar.gz
<span class="token comment"># 移动解压后的包到  /usr/java </span>
<span class="token function">mv</span> jdk1.8.0_191/ /usr/java
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>添加环境变量</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 修改 profile 文件</span>
<span class="token function">vim</span> /etc/profile

<span class="token comment"># 配置 jdk 环境变量</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable">JAVA_HOME</span><span class="token operator">=</span>/usr/java/jdk1.8.0_191
<span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token environment constant">$PATH</span><span class="token builtin class-name">:</span><span class="token variable">$JAVA_HOME</span>/bin

<span class="token comment"># 刷新 profile 文件，让环境变量生效</span>
<span class="token builtin class-name">source</span> /etc/profile
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="安装-tomcat"><a href="#安装-tomcat" class="header-anchor">#</a> 安装 Tomcat</h2> <h3 id="部署方案"><a href="#部署方案" class="header-anchor">#</a> 部署方案</h3> <p><img src="/note-architect/assets/img/image-20210225222917112.10475c11.png" alt="image-20210225222917112"></p> <p>这里会使用 3 台服务器：</p> <ul><li>tomcat-1 用来部署前端项目，后续会使用 nginx 来代替</li> <li>tomcat-2 用来部署后端项目</li> <li>mariaDB 数据库</li></ul> <p>他们三台服务器一定要在同一个局域网中，并且互通.</p> <ul><li>192.168.56.105 部署前端项目</li> <li>192.168.56.107 部署后端项目</li> <li>192.168.56.108 部署数据库</li></ul> <h3 id="部署前端-tomcat"><a href="#部署前端-tomcat" class="header-anchor">#</a> 部署前端 tomcat</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 部署前端 tomcat</span>
<span class="token punctuation">[</span>root@study software<span class="token punctuation">]</span><span class="token comment"># tar -zxvf apache-tomcat-9.0.24.tar.gz </span>
<span class="token punctuation">[</span>root@study software<span class="token punctuation">]</span><span class="token comment"># mv apache-tomcat-9.0.24 tomcat-frontend</span>
<span class="token punctuation">[</span>root@study software<span class="token punctuation">]</span><span class="token comment"># mv tomcat-frontend/ /usr/local/</span>
<span class="token punctuation">[</span>root@study software<span class="token punctuation">]</span><span class="token comment"># cd /usr/local/tomcat-frontend/</span>
<span class="token punctuation">[</span>root@study tomcat-frontend<span class="token punctuation">]</span><span class="token comment"># ./bin/startup.sh </span>

<span class="token comment"># 开放 8080 端口，tomcat 默认是以该端口提供服务</span>
firewall-cmd --add-port<span class="token operator">=</span><span class="token number">8080</span>/tcp --permanent
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>访问 <code>http://192.168.56.105:8080/</code> 检查 tomcat 是否已经启动。</p> <p>如果是线上部署：你需要申请二级域名来指向对应的服务，如：</p> <ul><li>api.mrcode.cn：后端 restfull 服务</li> <li>shop.mrcode.cn：天天吃货门户网站</li> <li>center.mrcode.cn：天天吃货用户中心</li></ul> <p>如果使用的是虚拟机，就使用 IP 访问吧</p> <h3 id="部署后端-tomcat"><a href="#部署后端-tomcat" class="header-anchor">#</a> 部署后端 tomcat</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 部署后端 tomcat</span>
<span class="token punctuation">[</span>root@study software<span class="token punctuation">]</span><span class="token comment"># mv apache-tomcat-9.0.24 /usr/local/tomcat-api</span>
<span class="token punctuation">[</span>root@study software<span class="token punctuation">]</span><span class="token comment"># cd /usr/local/tomcat-api/</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>访问 <code>http://192.168.56.107:8080/</code></p> <h2 id="centos7-防火墙-端口管理"><a href="#centos7-防火墙-端口管理" class="header-anchor">#</a> centos7 防火墙/端口管理</h2> <p>防火墙</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 查看防火墙状态 </span>
systemctl status firewalld
<span class="token comment"># 开启防火墙 </span>
systemctl start firewalld  
关闭防火墙
systemctl stop firewalld
开启防火墙 
<span class="token function">service</span> firewalld start 
若遇到无法开启
先用：systemctl unmask firewalld.service 
然后：systemctl start firewalld.service

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>端口管理</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 查询已开放的端口</span>
<span class="token function">netstat</span> -anp
<span class="token comment"># 添加</span>
firewall-cmd --add-port<span class="token operator">=</span><span class="token number">8080</span>/tcp --permanent
<span class="token comment"># 重载</span>
firewall-cmd --reload

<span class="token comment"># 查询端口是否开放</span>
<span class="token comment"># 提示 yes，表示开启；no表示未开启。</span>
firewall-cmd --query-port<span class="token operator">=</span><span class="token number">8080</span>/tcp
<span class="token comment"># 移除端口</span>
firewall-cmd --permanent --remove-port<span class="token operator">=</span><span class="token number">8080</span>/tcp
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>如果是云服务器的话，直接在入站规则里面暴露端口</p> <p><img src="/note-architect/assets/img/image-20210227223624775.b935f4a3.png" alt="image-20210227223624775"></p> <h2 id="安装-mariadb"><a href="#安装-mariadb" class="header-anchor">#</a> 安装 MariaDB</h2> <h3 id="安装-2"><a href="#安装-2" class="header-anchor">#</a> 安装</h3> <p><a href="https://mariadb.org/" target="_blank" rel="noopener noreferrer">MariaDb 官网<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，<a href="https://mariadb.org/download/" target="_blank" rel="noopener noreferrer">下载页面<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，找到如下图所示的地方</p> <p><img src="/note-architect/assets/img/image-20210227224040366.7bad9363.png" alt="image-20210227224040366"></p> <p>这里就出来了 yum 安装方式了。可以在线安装，因为这里提供了国内的镜像</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># MariaDB 10.4 CentOS repository list - created 2021-02-27 14:39 UTC</span>
<span class="token comment"># https://mariadb.org/download/</span>
<span class="token punctuation">[</span>mariadb<span class="token punctuation">]</span>
name <span class="token operator">=</span> MariaDB
baseurl <span class="token operator">=</span> https://mirrors.tuna.tsinghua.edu.cn/mariadb/yum/10.4/centos7-aarch64
<span class="token assign-left variable">gpgkey</span><span class="token operator">=</span>https://mirrors.tuna.tsinghua.edu.cn/mariadb/yum/RPM-GPG-KEY-MariaDB
<span class="token assign-left variable">gpgcheck</span><span class="token operator">=</span><span class="token number">1</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> yum <span class="token function">install</span> MariaDB-server MariaDB-client
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>这里采用离线安装（视频中当时没有提供国内镜像，速度很慢），<a href="https://mariadb.com/kb/en/mariadb-installation-version-10121-via-rpms-on-centos-7/" target="_blank" rel="noopener noreferrer">离线安装的官网文档在这里<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><img src="/note-architect/assets/img/image-20210227224655687.a5909482.png" alt="image-20210227224655687"></p> <p>里面写都很详细了，需要下载好几个 rpm 包，有依赖包，还有 mariaDB ，需要下载下来，然后按照后面的安装步骤安装 rpm</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 准备好 rpm 包</span>
<span class="token punctuation">[</span>root@study mariadb<span class="token punctuation">]</span><span class="token comment"># ls</span>
galera-4-26.4.2-1.rhel7.el7.centos.x86_64.rpm  MariaDB-common-10.4.8-1.el7.centos.x86_64.rpm
jemalloc-3.6.0-1.el7.x86_64.rpm                MariaDB-compat-10.4.8-1.el7.centos.x86_64.rpm
jemalloc-devel-3.6.0-1.el7.x86_64.rpm          MariaDB-server-10.4.8-1.el7.centos.x86_64.rpm
MariaDB-client-10.4.8-1.el7.centos.x86_64.rpm

<span class="token comment"># 安装依赖项</span>
yum <span class="token function">install</span> <span class="token function">rsync</span> nmap <span class="token function">lsof</span> perl-DBI <span class="token function">nc</span>
<span class="token function">rpm</span> -ivh jemalloc-3.6.0-1.el7.x86_64.rpm 
<span class="token function">rpm</span> -ivh jemalloc-devel-3.6.0-1.el7.x86_64.rpm 
<span class="token function">rpm</span> -ivh MariaDB-common-10.4.8-1.el7.centos.x86_64.rpm  MariaDB-compat-10.4.8-1.el7.centos.x86_64.rpm MariaDB-client-10.4.8-1.el7.centos.x86_64.rpm galera-4-26.4.2-1.rhel7.el7.centos.x86_64.rpm MariaDB-server-10.4.8-1.el7.centos.x86_64.rpm
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>如果安装失败，如下所示</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@study mariadb<span class="token punctuation">]</span><span class="token comment"># rpm -ivh MariaDB-common-10.4.8-1.el7.centos.x86_64.rpm  MariaDB-compat-10.4.8-1.el7.centos.x86_64.rpm MariaDB-client-10.4.8-1.el7.centos.x86_64.rpm galera-4-26.4.2-1.rhel7.el7.centos.x86_64.rpm MariaDB-server-10.4.8-1.el7.centos.x86_64.rpm</span>
警告：MariaDB-common-10.4.8-1.el7.centos.x86_64.rpm: 头V4 DSA/SHA1 Signature, 密钥 ID 1bb943db: NOKEY
错误：依赖检测失败：
        mariadb-libs <span class="token operator">&lt;</span> <span class="token number">1</span>:10.1.0 与 MariaDB-compat-10.4.8-1.el7.centos.x86_64 冲突
        mariadb-libs 被 MariaDB-compat-10.4.8-1.el7.centos.x86_64 取代
        mariadb 被 MariaDB-client-10.4.8-1.el7.centos.x86_64 取代
<span class="token comment"># mariadb-libs 冲突，官网文档中也有解决方案</span>
<span class="token comment"># 找到 mariadb-libs ，然后移除他们</span>
<span class="token punctuation">[</span>root@study mariadb<span class="token punctuation">]</span><span class="token comment"># rpm -ev --nodeps mariadb-libs-5.5.64-1.el7.x86_64</span>
<span class="token comment"># 如果还有依赖冲突问题，就像上面那样，将他们移除</span>

<span class="token comment"># 还有一些依赖问题需要解决，最后再尝试安装就成功了</span>
yum <span class="token function">install</span> boost-devel.x86_64
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>安装成功之后，注意下这里的打印信息</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>Two all-privilege accounts were created.
One is root@localhost, it has no password, but you need to
be system <span class="token string">'root'</span> user to connect. Use, <span class="token keyword">for</span> example, <span class="token function">sudo</span> mysql
The second is mysql@localhost, it has no password either, but
you need to be the system <span class="token string">'mysql'</span> user to connect.
After connecting you can <span class="token builtin class-name">set</span> the password, <span class="token keyword">if</span> you would need to be
able to connect as any of these <span class="token function">users</span> with a password and without <span class="token function">sudo</span>

See the MariaDB Knowledgebase at http://mariadb.com/kb or the
MySQL manual <span class="token keyword">for</span> <span class="token function">more</span> instructions.

Please report any problems at http://mariadb.org/jira

The latest information about MariaDB is available at http://mariadb.org/.
You can <span class="token function">find</span> additional information about the MySQL part at:
http://dev.mysql.com
Consider joining MariaDB's strong and vibrant community:
https://mariadb.org/get-involved/
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>上面说创建了两个没有密码的账户，他们都只支持 localhost 链接到 mysql 服务器：</p> <ul><li><code>root@localhost</code>：需要使用系统账户 root 链接到 mysql 服务器</li> <li><code>mysql@localhost</code>：需要使用系统账户 mysql 链接</li></ul> <h3 id="mariadb-启动与抽次安全配置"><a href="#mariadb-启动与抽次安全配置" class="header-anchor">#</a> mariaDb 启动与抽次安全配置</h3> <p>启动 mysql，他的启动命令和 mysql 是一致的，所以可以和 mysql 无缝切换</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">service</span> mysql start
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>启动之后，再运行安全配置：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>After step <span class="token number">4</span>, the installation will be completed. The last step will be to run mysql_secure_installation to secure the production server by dis allowing remote login <span class="token keyword">for</span> root, creating root password and removing the <span class="token builtin class-name">test</span> database.

<span class="token number">5</span><span class="token punctuation">)</span> mysql_secure_installation
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>安装配置的文档也在上面的离线安装文档中有写明了，在页面最底部的第 5 步，<a href="https://mariadb.com/kb/en/mysql_secure_installation/" target="_blank" rel="noopener noreferrer">mysql_secure_installation 的使用文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>mysql_secure_installation
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol><li>输入当前密码，初次安装后是没有密码的，直接回车</li> <li>新闻是否使用 <code>unix_socket</code> 进行身份验证：n</li> <li>为 root 设置密码：y</li> <li>输入 root 的新密码：root</li> <li>确认输入 root 的新密码：root</li> <li>是否移除匿名用户：y</li> <li>禁止 root 远程登录?：n</li> <li>是否删除数据库中的 test 库：y</li> <li>是否重新加载 <code>privilege</code> 表的内容：y</li></ol> <p>初始化完成。</p> <h3 id="配置远程登录"><a href="#配置远程登录" class="header-anchor">#</a> 配置远程登录</h3> <p>如果你尝试使用 UI 工具远程连接到 192.168.56.108:3306 的 mysql 服务器，会提示</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>HY000<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1130</span><span class="token punctuation">]</span> null,  message from server: <span class="token string">&quot;Host 'gateway' is not allowed to connect to this MariaDB server&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>被拒绝了（当前前提要开放 3306 端口号）</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 在服务器上进入 mysql 控制台</span>
mysql -u root -p
<span class="token comment"># 增加 root 远程登录权限</span>
<span class="token comment"># 这里 root 密码还是写的 root</span>
grant all privileges on *.* to <span class="token string">'root'</span>@<span class="token string">'%'</span> identified by <span class="token string">'root密码'</span><span class="token punctuation">;</span>
flush privileges<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="准备生产环境所需要的表结构"><a href="#准备生产环境所需要的表结构" class="header-anchor">#</a> 准备生产环境所需要的表结构</h2> <p>可以使用 Navicat Premium 软件完成，表结构和数据的拷贝。</p> <p>有一些初始数据是需要的：比如商品相关数据，为了简单，这里直接将测试环境所有数据都复制过去。</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/zq99299/note-architect/edit/main/docs/ztc/05/01.md" target="_blank" rel="noopener noreferrer">帮助我们改善此页面！</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2022-06-22 09:57:38</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/note-architect/ztc/04/05.html" class="prev">
        中心首页
      </a></span> <span class="next"><a href="/note-architect/ztc/05/02.html">
        SpringBoot 多环境部署 profile(开发环境/生产环境)
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/note-architect/assets/js/app.802a2e28.js" defer></script><script src="/note-architect/assets/js/2.c5658f11.js" defer></script><script src="/note-architect/assets/js/10.038bd2f4.js" defer></script><script src="/note-architect/assets/js/49.c0fbdc86.js" defer></script>
  </body>
</html>
